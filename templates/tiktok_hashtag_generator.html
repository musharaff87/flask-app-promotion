{% extends "base.html" %}
{% block title %}Free TikTok Hashtag Generator - Viral Tags & FYP Hashtags 2024 | Mushtastic Intelligence{% endblock %}
{% block content %}
<div class="container py-5">
    <!-- Hero Section -->
    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold text-dark">🎵 TikTok Hashtag Generator</h1>
        <p class="lead mb-4">Generate viral TikTok hashtags for FYP - Get on the For You Page!</p>
        <div class="row text-center mb-4">
            <div class="col-6 col-md-3">
                <div class="stat-number text-success h3">100%</div>
                <small>Free Forever</small>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-number text-dark h3">FYP</div>
                <small>Ready Tags</small>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-number text-danger h3">1B+</div>
                <small>TikTok Users</small>
            </div>
            <div class="col-6 col-md-3">
                <div class="stat-number text-warning h3">VIRAL</div>
                <small>Potential</small>
            </div>
        </div>
        <p class="text-muted">Join the 1 billion TikTok users and make your content go viral with the right hashtags!</p>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <!-- Generator Form -->
            <div class="card shadow-lg mb-4">
                <div class="card-body p-4">
                    <form id="hashtagGeneratorForm">
                        <div class="mb-4">
                            <label for="videoPrompt" class="form-label fw-bold">Describe your TikTok video:</label>
                            <textarea
                                class="form-control form-control-lg"
                                id="videoPrompt"
                                rows="4"
                                placeholder="E.g., Dancing to trending song in bedroom, showing off new outfit, funny reaction to viral trend, cooking easy recipe..."
                                required
                            ></textarea>
                            <div class="form-text">💡 Include the mood, activity, location, and trend if applicable for viral hashtags!</div>
                        </div>

                        <div class="row mb-4">
                            <div class="col-md-4 mb-3">
                                <label for="contentType" class="form-label fw-bold">Content Type:</label>
                                <select class="form-select" id="contentType">
                                    <option value="dance">💃 Dance</option>
                                    <option value="comedy">😂 Comedy/Funny</option>
                                    <option value="lifestyle">✨ Lifestyle</option>
                                    <option value="education">🎓 Educational</option>
                                    <option value="food">🍕 Food & Cooking</option>
                                    <option value="fashion">👗 Fashion & Style</option>
                                    <option value="beauty">💄 Beauty & Makeup</option>
                                    <option value="fitness">💪 Fitness & Health</option>
                                    <option value="diy">🔨 DIY & Crafts</option>
                                    <option value="pets">🐕 Pets & Animals</option>
                                    <option value="travel">🌍 Travel</option>
                                    <option value="music">🎵 Music</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="hashtagCount" class="form-label fw-bold">Number of hashtags:</label>
                                <select class="form-select" id="hashtagCount">
                                    <option value="15">15 hashtags</option>
                                    <option value="20">20 hashtags</option>
                                    <option value="25" selected>25 hashtags</option>
                                    <option value="30">30 hashtags</option>
                                    <option value="40">40 hashtags</option>
                                    <option value="50">50 hashtags</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="viralStrategy" class="form-label fw-bold">Viral Strategy:</label>
                                <select class="form-select" id="viralStrategy">
                                    <option value="fyp" selected>🔥 FYP Focus (#fyp #viral)</option>
                                    <option value="trending">📈 Trending Tags</option>
                                    <option value="niche">🎯 Niche Community</option>
                                    <option value="mixed">⚖️ Balanced Mix</option>
                                </select>
                            </div>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn btn-dark btn-lg py-3">
                                <span class="spinner-border spinner-border-sm d-none me-2" id="loadingSpinner"></span>
                                <span id="buttonText">Generate Viral TikTok Hashtags 🚀</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Results Section -->
            <div id="resultsSection" class="d-none">
                <div class="card shadow-lg">
                    <div class="card-header bg-dark text-white">
                        <div class="d-flex justify-content-between align-items-center flex-wrap">
                            <h5 class="mb-0">🎉 Viral TikTok Hashtags Ready!</h5>
                            <div class="btn-group mt-2 mt-md-0" role="group">
                                <button class="btn btn-light btn-sm" id="copyAllBtn">
                                    <i class="fas fa-copy"></i> Copy All
                                </button>
                                <button class="btn btn-outline-light btn-sm" id="copyFYPBtn">
                                    FYP Tags Only
                                </button>
                                <button class="btn btn-outline-light btn-sm" id="regenerateBtn">
                                    <i class="fas fa-refresh"></i> Generate More
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="hashtagResults" class="hashtag-container mb-4"></div>
                        
                        <!-- Copy Options -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <h6 class="fw-bold">📱 Copy Formats:</h6>
                                <div class="d-flex flex-wrap gap-2">
                                    <button class="btn btn-outline-primary btn-sm" onclick="copyFormatted('hash')">With #</button>
                                    <button class="btn btn-outline-secondary btn-sm" onclick="copyFormatted('space')">Space Separated</button>
                                    <button class="btn btn-outline-success btn-sm" onclick="copyFormatted('lines')">Line by Line</button>
                                    <button class="btn btn-outline-info btn-sm" onclick="copyFormatted('caption')">Caption Ready</button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6 class="fw-bold">📊 Hashtag Stats:</h6>
                                <div id="statsContainer">
                                    <small class="text-muted">
                                        <span id="tagStats">0 hashtags generated</span> •
                                        <span id="fypCount">0 FYP tags</span> •
                                        <span id="characterCount">0 chars</span>
                                    </small>
                                </div>
                            </div>
                        </div>

                        <!-- TikTok Tips -->
                        <div class="bg-light p-3 rounded">
                            <h6 class="fw-bold text-dark">🎬 TikTok Hashtag Tips for Going Viral:</h6>
                            <ul class="small mb-0">
                                <li><strong>Use #fyp and #foryou</strong> - Essential for algorithm discovery</li>
                                <li><strong>Mix trending and niche hashtags</strong> - Balance reach with engagement</li>
                                <li><strong>Follow current trends</strong> - Jump on viral sounds and challenges</li>
                                <li><strong>Use 3-5 hashtags in caption</strong> - Too many can look spammy</li>
                                <li><strong>Research your niche</strong> - Find community-specific hashtags</li>
                                <li><strong>Post at peak times</strong> - Increase chances of FYP placement</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Error Section -->
            <div id="errorSection" class="mt-4 d-none">
                <div class="alert alert-danger">
                    <strong>⚠️ Error:</strong> <span id="errorMessage"></span>
                    <button class="btn btn-outline-danger btn-sm ms-2" onclick="document.getElementById('hashtagGeneratorForm').dispatchEvent(new Event('submit'))">Try Again</button>
                </div>
            </div>
        </div>

        <!-- Sidebar with Examples and Tips -->
        <div class="col-lg-4">
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">🔥 Viral Hashtag Examples</h5>
                </div>
                <div class="card-body">
                    <h6 class="fw-bold">Dance Content:</h6>
                    <div class="hashtag-example mb-3">
                        <small>#fyp #foryou #dance #viral #trending #dancechallenge #tiktokdance #moves</small>
                    </div>
                    
                    <h6 class="fw-bold">Comedy/Funny:</h6>
                    <div class="hashtag-example mb-3">
                        <small>#fyp #viral #funny #comedy #relatable #humor #lol #trending #meme</small>
                    </div>

                    <h6 class="fw-bold">Lifestyle/GRWM:</h6>
                    <div class="hashtag-example">
                        <small>#fyp #grwm #lifestyle #morning #routine #aesthetic #viral #outfit #ootd</small>
                    </div>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header bg-info text-white">
                    <h5 class="mb-0">📈 TikTok Algorithm Tips</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">✅ <strong>Hook viewers in 3 seconds:</strong> Start with impact</li>
                        <li class="mb-2">✅ <strong>Use trending sounds:</strong> Algorithm favors popular audio</li>
                        <li class="mb-2">✅ <strong>Post consistently:</strong> 1-3 times per day optimal</li>
                        <li class="mb-2">✅ <strong>Engage quickly:</strong> Respond to comments fast</li>
                        <li class="mb-2">✅ <strong>Follow trends early:</strong> Be among first to try</li>
                        <li class="mb-0">✅ <strong>Use captions wisely:</strong> Keep them short and engaging</li>
                    </ul>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header bg-warning text-dark">
                    <h5 class="mb-0">🎯 FYP Strategy</h5>
                </div>
                <div class="card-body">
                    <h6 class="fw-bold">Essential FYP Tags:</h6>
                    <div class="d-flex flex-wrap mb-3">
                        <span class="badge bg-dark me-1 mb-1">#fyp</span>
                        <span class="badge bg-dark me-1 mb-1">#foryou</span>
                        <span class="badge bg-dark me-1 mb-1">#viral</span>
                        <span class="badge bg-dark me-1 mb-1">#trending</span>
                        <span class="badge bg-dark me-1 mb-1">#foryoupage</span>
                    </div>
                    
                    <h6 class="fw-bold">Timing Tips:</h6>
                    <ul class="small mb-0">
                        <li>📅 <strong>Peak hours:</strong> 6-10pm, 7-9am</li>
                        <li>📅 <strong>Best days:</strong> Tuesday-Thursday</li>
                        <li>📅 <strong>Weekend:</strong> 9am-1pm works well</li>
                        <li>📅 <strong>Consistency:</strong> Post same times daily</li>
                    </ul>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header bg-danger text-white">
                    <h5 class="mb-0">🚫 TikTok Don'ts</h5>
                </div>
                <div class="card-body">
                    <ul class="list-unstyled">
                        <li class="mb-2">❌ <strong>Don't use banned hashtags</strong></li>
                        <li class="mb-2">❌ <strong>Avoid over-hashtagging</strong></li>
                        <li class="mb-2">❌ <strong>Don't ignore trends</strong></li>
                        <li class="mb-2">❌ <strong>Don't post at random times</strong></li>
                        <li class="mb-0">❌ <strong>Don't use only broad hashtags</strong></li>
                    </ul>
                </div>
            </div>

            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0">🔗 More Social Tools</h5>
                </div>
                <div class="card-body">
                    <div class="d-grid gap-2">
                        <a href="/tiktok-caption-generator" class="btn btn-outline-dark btn-sm">TikTok Captions</a>
                        <a href="/tiktok-hook-generator" class="btn btn-outline-success btn-sm">Hook Generator</a>
                        <a href="/instagram-hashtag-generator" class="btn btn-outline-primary btn-sm">Instagram Hashtags</a>
                        <a href="/youtube-tag-generator" class="btn btn-outline-danger btn-sm">YouTube Tags</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- SEO Content Section -->
    <div class="row mt-5">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <h2 class="h3 fw-bold mb-4">TikTok Hashtag Generator - Free Viral Tags & FYP Tool 2024</h2>
                    
                    <div class="row">
                        <div class="col-lg-8">
                            <h3>How to Get on TikTok's For You Page (FYP)</h3>
                            <p>Getting on TikTok's For You Page is the holy grail of TikTok success. Our <strong>free TikTok hashtag generator</strong> creates viral hashtag combinations that significantly increase your chances of FYP placement and explosive growth.</p>

                            <h3>The Science Behind TikTok Hashtags</h3>
                            <p>TikTok's algorithm uses hashtags differently than other platforms:</p>
                            <ul>
                                <li><strong>Content Categorization:</strong> Hashtags help TikTok understand your content type</li>
                                <li><strong>Audience Targeting:</strong> Algorithm shows content to users interested in specific hashtags</li>
                                <li><strong>Trend Identification:</strong> Trending hashtags signal current popular topics</li>
                                <li><strong>Discovery Enhancement:</strong> Right hashtags increase visibility in hashtag feeds</li>
                            </ul>

                            <h3>Essential TikTok Hashtags for 2024</h3>
                            <h4>Core FYP Hashtags (Must Use):</h4>
                            <ul>
                                <li><strong>#fyp</strong> - For You Page targeting</li>
                                <li><strong>#foryou</strong> - Alternative FYP hashtag</li>
                                <li><strong>#viral</strong> - Signals viral potential</li>
                                <li><strong>#trending</strong> - Indicates trending content</li>
                                <li><strong>#foryoupage</strong> - Extended FYP targeting</li>
                            </ul>

                            <h4>Category-Specific Viral Hashtags:</h4>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Content Type</th>
                                            <th>Top Hashtags</th>
                                            <th>Engagement Rate</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Dance</strong></td>
                                            <td>#dance #dancechallenge #tiktokdance</td>
                                            <td>8.2%</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Comedy</strong></td>
                                            <td>#funny #comedy #relatable #humor</td>
                                            <td>7.8%</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Lifestyle</strong></td>
                                            <td>#lifestyle #grwm #aesthetic #routine</td>
                                            <td>6.9%</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Food</strong></td>
                                            <td>#food #recipe #cooking #foodie</td>
                                            <td>6.5%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <h3>TikTok Hashtag Strategies That Work</h3>
                            <h4>1. The 3-2-1 Rule</h4>
                            <ul>
                                <li><strong>3 trending hashtags</strong> - For maximum reach</li>
                                <li><strong>2 niche hashtags</strong> - For targeted engagement</li>
                                <li><strong>1 branded hashtag</strong> - For community building</li>
                            </ul>

                            <h4>2. Trend Jumping Strategy</h4>
                            <p>Our AI identifies emerging trends before they peak, helping you:</p>
                            <ul>
                                <li>Get early adoption advantages</li>
                                <li>Ride trend waves for maximum exposure</li>
                                <li>Position content for viral potential</li>
                                <li>Build authority in trending topics</li>
                            </ul>

                            <h4>3. Niche Community Targeting</h4>
                            <p>Beyond viral hashtags, community-specific tags drive engagement:</p>
                            <ul>
                                <li><strong>BookTok:</strong> #booktok #bookish #reading</li>
                                <li><strong>FitTok:</strong> #fitness #workout #gym</li>
                                <li><strong>StudyTok:</strong> #studytok #student #productivity</li>
                                <li><strong>CleanTok:</strong> #cleantok #cleaning #organization</li>
                            </ul>

                            <h3>TikTok Hashtag Mistakes to Avoid</h3>
                            <ul>
                                <li>❌ <strong>Using only broad hashtags:</strong> Too much competition</li>
                                <li>❌ <strong>Irrelevant hashtags:</strong> Confuses algorithm</li>
                                <li>❌ <strong>Banned hashtags:</strong> Reduces visibility</li>
                                <li>❌ <strong>Over-hashtagging:</strong> Looks spammy</li>
                                <li>❌ <strong>Ignoring trends:</strong> Misses viral opportunities</li>
                            </ul>

                            <h3>Measuring TikTok Hashtag Success</h3>
                            <p>Track these metrics to optimize your hashtag strategy:</p>
                            <ul>
                                <li><strong>Views:</strong> Total reach from hashtags</li>
                                <li><strong>Likes:</strong> Engagement quality indicator</li>
                                <li><strong>Shares:</strong> Viral potential measure</li>
                                <li><strong>Comments:</strong> Community engagement level</li>
                                <li><strong>Follows:</strong> Long-term growth impact</li>
                            </ul>
                        </div>

                        <div class="col-lg-4">
                            <div class="bg-dark text-white p-4 rounded mb-4">
                                <h5>🚀 TikTok Hashtag Features</h5>
                                <ul class="list-unstyled mb-0">
                                    <li>• Viral FYP hashtag combinations</li>
                                    <li>• Trending topic integration</li>
                                    <li>• Niche community targeting</li>
                                    <li>• Real-time trend analysis</li>
                                    <li>• Multiple copy formats</li>
                                    <li>• Unlimited generations</li>
                                </ul>
                            </div>

                            <div class="bg-light p-4 rounded mb-4">
                                <h6>📊 TikTok Success Stats:</h6>
                                <ul class="small mb-0">
                                    <li>• <strong>1 billion+</strong> monthly active users</li>
                                    <li>• <strong>52 minutes</strong> average daily usage</li>
                                    <li>• <strong>41%</strong> users aged 16-24</li>
                                    <li>• <strong>68%</strong> of viral videos use trending hashtags</li>
                                    <li>• <strong>150%</strong> higher engagement than Instagram</li>
                                </ul>
                            </div>

                            <div class="bg-success text-white p-4 rounded mb-4">
                                <h6>💡 Pro Tips</h6>
                                <ul class="small mb-0">
                                    <li>• Post during peak hours (6-10pm)</li>
                                    <li>• Use trending sounds with hashtags</li>
                                    <li>• Engage with comments immediately</li>
                                    <li>• Cross-promote on other platforms</li>
                                    <li>• Collaborate with other creators</li>
                                </ul>
                            </div>

                            <div class="bg-warning text-dark p-4 rounded">
                                <h6>🎯 Viral Formula</h6>
                                <p class="small mb-0"><strong>Trending Sound + Perfect Hashtags + Hook in 3s + Post at Peak Time = Viral Potential!</strong></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <div class="text-center mt-5">
        <div class="btn-group flex-wrap" role="group">
            <a href="/tiktok-tools" class="btn btn-outline-dark">← TikTok Tools</a>
            <a href="/tiktok-caption-generator" class="btn btn-dark">TikTok Captions →</a>
        </div>
    </div>
</div>

<style>
.hashtag-container {
    max-height: 400px;
    overflow-y: auto;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    padding: 15px;
    background: linear-gradient(135deg, #ff0050 0%, #00f2fe 100%);
}

.tiktok-hashtag {
    display: inline-block;
    background: rgba(255, 255, 255, 0.9);
    color: #000;
    padding: 0.4rem 0.8rem;
    margin: 0.25rem;
    border-radius: 20px;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 2px solid transparent;
    font-weight: 600;
}

.tiktok-hashtag:hover {
    transform: translateY(-2px) scale(1.05);
    background: #fff;
    border-color: #ff0050;
    box-shadow: 0 4px 12px rgba(255, 0, 80, 0.3);
}

.tiktok-hashtag.copied {
    background: #25f4ee;
    color: #000;
    animation: pulse 0.6s ease-in-out;
}

.tiktok-hashtag.fyp-tag {
    background: linear-gradient(135deg, #ff0050 0%, #ff4081 100%);
    color: white;
}

.hashtag-example {
    background: linear-gradient(135deg, #ff0050 0%, #00f2fe 100%);
    color: white;
    padding: 10px;
    border-radius: 6px;
    font-family: monospace;
}

.stat-number {
    font-size: 1.5rem;
    font-weight: bold;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
}

.form-control:focus, .form-select:focus {
    border-color: #ff0050;
    box-shadow: 0 0 0 0.2rem rgba(255, 0, 80, 0.25);
}

@media (max-width: 768px) {
    .btn-group {
        flex-direction: column;
    }
    
    .btn-group .btn {
        margin-bottom: 0.5rem;
    }
    
    .tiktok-hashtag {
        font-size: 0.8rem;
        padding: 0.3rem 0.6rem;
    }
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('hashtagGeneratorForm');
    const loadingSpinner = document.getElementById('loadingSpinner');
    const buttonText = document.getElementById('buttonText');
    const resultsSection = document.getElementById('resultsSection');
    const errorSection = document.getElementById('errorSection');
    const hashtagResults = document.getElementById('hashtagResults');
    const copyAllBtn = document.getElementById('copyAllBtn');
    const copyFYPBtn = document.getElementById('copyFYPBtn');
    const regenerateBtn = document.getElementById('regenerateBtn');

    let lastGeneratedTags = [];
    const fypTags = ['fyp', 'foryou', 'viral', 'trending', 'foryoupage'];

    form.addEventListener('submit', async function(e) {
        e.preventDefault();
        await generateHashtags();
    });

    regenerateBtn.addEventListener('click', async function() {
        await generateHashtags();
    });

    copyAllBtn.addEventListener('click', function() {
        const tags = lastGeneratedTags.map(tag => '#' + tag).join(' ');
        copyToClipboard(tags);
        showCopyFeedback(this, 'All hashtags copied!');
    });

    copyFYPBtn.addEventListener('click', function() {
        const fypHashtags = lastGeneratedTags
            .filter(tag => fypTags.includes(tag.toLowerCase()))
            .map(tag => '#' + tag);
        const tags = fypHashtags.join(' ');
        copyToClipboard(tags);
        showCopyFeedback(this, 'FYP tags copied!');
    });

    async function generateHashtags() {
        const prompt = document.getElementById('videoPrompt').value.trim();
        const contentType = document.getElementById('contentType').value;
        const count = parseInt(document.getElementById('hashtagCount').value);
        const strategy = document.getElementById('viralStrategy').value;

        if (!prompt) {
            showError('Please describe your TikTok video');
            return;
        }

        const enhancedPrompt = `${prompt} (Content: ${contentType}, Strategy: ${strategy})`;

        setLoadingState(true);
        hideResults();
        hideError();

        try {
            const response = await fetch('/api/tiktok/hashtags', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    prompt: enhancedPrompt,
                    count: count
                })
            });

            const data = await response.json();

            if (!response.ok) {
                throw new Error(data.error || 'Failed to generate hashtags');
            }

            if (data.success && data.tags) {
                displayResults(data.tags);
                lastGeneratedTags = data.tags;
            } else {
                throw new Error('Invalid response format');
            }

        } catch (error) {
            console.error('Error:', error);
            showError(error.message);
        } finally {
            setLoadingState(false);
        }
    }

    function setLoadingState(loading) {
        const submitBtn = form.querySelector('button[type="submit"]');
        if (loading) {
            loadingSpinner.classList.remove('d-none');
            submitBtn.disabled = true;
            buttonText.textContent = 'Creating Viral Magic...';
        } else {
            loadingSpinner.classList.add('d-none');
            submitBtn.disabled = false;
            buttonText.textContent = 'Generate Viral TikTok Hashtags 🚀';
        }
    }

    function displayResults(tags) {
        hashtagResults.innerHTML = '';

        tags.forEach((tag, index) => {
            const tagElement = document.createElement('button');
            tagElement.className = 'tiktok-hashtag';
            
            // Mark FYP tags specially
            if (fypTags.includes(tag.toLowerCase())) {
                tagElement.classList.add('fyp-tag');
            }
            
            tagElement.textContent = tag;
            tagElement.title = `Click to copy #${tag}`;
            tagElement.addEventListener('click', function() {
                copyToClipboard('#' + tag);
                this.classList.add('copied');
                setTimeout(() => {
                    this.classList.remove('copied');
                }, 1000);
            });
            hashtagResults.appendChild(tagElement);
        });

        // Update stats
        const fypTagCount = tags.filter(tag => fypTags.includes(tag.toLowerCase())).length;
        document.getElementById('tagStats').textContent = `${tags.length} hashtags generated`;
        document.getElementById('fypCount').textContent = `${fypTagCount} FYP tags`;
        const charCount = tags.map(tag => '#' + tag).join(' ').length;
        document.getElementById('characterCount').textContent = `${charCount} chars`;

        resultsSection.classList.remove('d-none');
        resultsSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    }

    function showError(message) {
        document.getElementById('errorMessage').textContent = message;
        errorSection.classList.remove('d-none');
        errorSection.scrollIntoView({ behavior: 'smooth' });
    }

    function hideError() {
        errorSection.classList.add('d-none');
    }

    function hideResults() {
        resultsSection.classList.add('d-none');
    }

    function copyToClipboard(text) {
        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(text);
        } else {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            document.execCommand('copy');
            textArea.remove();
        }
    }

    function showCopyFeedback(button, message) {
        const originalText = button.innerHTML;
        button.innerHTML = `<i class="fas fa-check"></i> ${message}`;
        button.classList.add('btn-success');
        button.classList.remove('btn-light', 'btn-outline-light');
        
        setTimeout(() => {
            button.innerHTML = originalText;
            button.classList.remove('btn-success');
            button.classList.add(button.id === 'copyAllBtn' ? 'btn-light' : 'btn-outline-light');
        }, 2000);
    }

    // Copy format functions
    window.copyFormatted = function(format) {
        let text = '';
        switch(format) {
            case 'hash':
                text = lastGeneratedTags.map(tag => '#' + tag).join(' ');
                break;
            case 'space':
                text = lastGeneratedTags.join(' ');
                break;
            case 'lines':
                text = lastGeneratedTags.map(tag => '#' + tag).join('\n');
                break;
            case 'caption':
                text = lastGeneratedTags.slice(0, 5).map(tag => '#' + tag).join(' ');
                break;
        }
        copyToClipboard(text);
        
        // Show feedback
        const button = event.target;
        showCopyFeedback(button, 'Copied!');
    };
});
</script>
{% endblock %}